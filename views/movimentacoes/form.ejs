<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title><%= titulo %></title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1><%= titulo %></h1>

    <% if (erros.geral) { %>
        <div class="alert-error">
            <strong>Erro:</strong> <%= erros.geral.msg %>
        </div>
    <% } %>

    <form action="/movimentacoes" method="POST">
        
        <div class="form-group">
            <label for="equipamentoId">Equipamento:</label>
            <select name="equipamentoId" id="equipamentoId">
                <option value="">Selecione...</option>
                <% equipamentos.forEach(eq => { %>
                    <option value="<%= eq.id %>" <%= dados.equipamentoId == eq.id ? 'selected' : '' %>>
                        <%= eq.patrimonio %> - <%= eq.nome %> (<%= eq.estado %>)
                    </option>
                <% }) %>
            </select>
            <% if (erros.equipamentoId) { %>
                <div class="error"><%= erros.equipamentoId.msg %></div>
            <% } %>
        </div>

        <div class="form-group">
            <label for="localId">Local de Destino:</label>
            <select name="localId" id="localId">
                <option value="">Selecione...</option>
                <% locais.forEach(loc => { %>
                    <option value="<%= loc.id %>" <%= dados.localId == loc.id ? 'selected' : '' %>>
                        <%= loc.nome %> - Sala <%= loc.sala %>
                    </option>
                <% }) %>
            </select>
            <% if (erros.localId) { %>
                <div class="error"><%= erros.localId.msg %></div>
            <% } %>
        </div>

        <div class="form-group">
            <label for="responsavel">Responsável pela movimentação:</label>
            <input type="text" id="responsavel" name="responsavel" value="<%= dados.responsavel || '' %>" placeholder="Nome do Professor/Técnico">
            <% if (erros.responsavel) { %>
                <div class="error"><%= erros.responsavel.msg %></div>
            <% } %>
        </div>

        <button type="submit">Registrar Movimentação</button>
        <a href="/movimentacoes" style="margin-left: 10px;">Cancelar</a>
    </form>
</body>
</html>